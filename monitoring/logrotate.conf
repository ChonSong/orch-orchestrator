# Log rotation configuration for application logs
# Place this in /etc/logrotate.d/ or run with logrotate -f

/var/log/apps/*.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 644 seanos1a seanos1a
    postrotate
        # Notify PM2 to reopen log files
        pm2 reloadLogs > /dev/null 2>&1 || true
    endscript
}

/var/log/pm2/*.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 644 seanos1a seanos1a
    postrotate
        # Restart PM2 logging
        pm2 reloadLogs > /dev/null 2>&1 || true
    endscript
}